(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{2491:(e,t,r)=>{Promise.resolve().then(r.bind(r,9247))},3988:(e,t,r)=>{"use strict";r.d(t,{H:()=>s});let s="http://localhost:8080"},9247:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),i=r(2115),n=r(2108);let a=(0,r(9946).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var o=r(3988);function c(){let{data:e,status:t}=(0,n.useSession)(),r=null==e?void 0:e.idToken,[c,l]=(0,i.useState)(!1),[d,u]=(0,i.useState)(null),h=(0,i.useCallback)(async()=>{if(!r)return void u("Please sign in to subscribe.");u(null),l(!0);try{let e,t=new URLSearchParams({successUrl:"".concat(window.location.origin,"/account"),cancelUrl:window.location.href}),s=await fetch("".concat(o.H,"/api/billing/checkout?").concat(t.toString()),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{}}});if(!s.ok){let e=await s.text().catch(()=>"");throw Error("Checkout failed: ".concat(s.status," ").concat(s.statusText).concat(e?" — ".concat(e):""))}try{e=await s.json()}catch(e){throw Error("Invalid JSON response from server.")}let i=null==e?void 0:e.url;if("string"!=typeof i||!i)throw Error("Missing checkout URL in response.");window.location.assign(i)}catch(e){u(e instanceof Error?e.message:"Unknown error"),console.error("[billing] subscription error:",e)}finally{l(!1)}},[r]);return"loading"===t?(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-sky-800",children:"Pricing"}),(0,s.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,s.jsx)("div",{className:"text-slate-700",children:"20 free conversions per day."}),(0,s.jsxs)("div",{className:"text-slate-700 mb-4",children:["Subscribe for unlimited conversions (see"," ",(0,s.jsx)("a",{href:"https://x.ai/grok",className:"text-sky-600 underline",children:"pricing details"}),")."]}),(0,s.jsxs)("button",{onClick:h,disabled:c||!r,className:"inline-flex items-center gap-2 rounded-md bg-sky-600 px-4 py-2 text-white hover:bg-sky-700 disabled:opacity-60 disabled:cursor-not-allowed",children:[(0,s.jsx)(a,{size:16}),c?"Processing…":"Subscribe"]}),d&&(0,s.jsx)("p",{className:"mt-3 text-sm text-red-600 break-words",children:d})]})]})}},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(2115);let i=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:l="",children:d,iconNode:u,...h}=e;return(0,s.createElement)("svg",{ref:t,...a,width:i,height:i,stroke:r,strokeWidth:c?24*Number(o)/Number(i):o,className:n("lucide",l),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,s.forwardRef)((r,a)=>{let{className:c,...l}=r;return(0,s.createElement)(o,{ref:a,iconNode:t,className:n("lucide-".concat(i(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...l})});return r.displayName=i(e),r}}},e=>{e.O(0,[108,441,964,358],()=>e(e.s=2491)),_N_E=e.O()}]);